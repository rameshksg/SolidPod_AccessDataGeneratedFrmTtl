const moment = require("moment");
const rdf_ext = require("rdf-ext");
const rdf_formats_common = require ("rdf-formats-common");
const stream_to_string = require("stream-to-string");
const string_to_stream = require("string-to-stream");

!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("rdf-ext"),require("moment"),require("rdf-formats-common"),require("string-to-stream"),require("stream-to-string")):"function"==typeof define&&define.amd?define(["rdf_ext","moment","rdf_formats_common","string_to_stream","stream_to_string"],e):"object"==typeof exports?exports.litVocab=e(require("rdf_ext"),require("moment"),require("rdf_formats_common"),require("string_to_stream"),require("stream_to_string")):t.litVocab=e(t.rdf_ext,t.moment,t.rdf_formats_common,t.string_to_stream,t.stream_to_string)}(window,(function(t,e,r,n,o){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=7)}([function(t,e,r){"use strict";const n=r(2),o="i18nextLng";t.exports=class{constructor(t,e){if(!t)throw new Error("A new context *MUST* be provided a locale, but none was provided.");if(!e)throw new Error("A new context *MUST* be provided storage (we expect 'localStorage').");this._initialLocale=t,this._storage=e,this._storage.setItem(o,t),this._createdAt=n().valueOf()}getLocale(){return this._storage.getItem(o)}setLocale(t){return this._storage.setItem(o,t),this}getInitialLocale(){return this._initialLocale}getCreatedAt(){return this._createdAt}},t.exports.CONTEXT_KEY_LOCALE=o,t.exports.CONTEXT_KEY_PREFERRED_FALLBACK_LANGUAGE="lang_preferred_fallback"},function(e,r){e.exports=t},function(t,r){t.exports=e},function(t,e,r){"use strict";const n=r(2);class o extends Error{constructor(t,e,r){if(super(e),r)if(r instanceof o)this._wrappedContextException=r,this.message=`${this.message}\nContains context error: ${r.message}`;else{if(!(r instanceof Error))throw new Error(`Context error can only wrap ContextErrors or Errors, but got [${r}] (message was [${e}]).`);this._wrappedStandardException=r,this.message=`${this.message}\nContains error: ${r.message}`}this._context=t,this._createdAt=n().valueOf()}report(t,e,r){return r.message}countLevels(){let t;if(this._wrappedStandardException)t=2;else{t=1;let e=this._wrappedContextException;for(;e;)e._wrappedStandardException&&t++,e=e._wrappedContextException,t++}return t}unwrapException(){const t=this.countLevels();let e=1,r=this.report(e,t,this);if(this._wrappedStandardException)r+="\n\n"+this.report(++e,t,this._wrappedStandardException);else{let n=this._wrappedContextException;for(;n;)r+="\n\n"+this.report(++e,t,n),n._wrappedStandardException&&(r+="\n\n"+this.report(++e,t,n._wrappedStandardException)),n=n._wrappedContextException}return r}toString(){return this.unwrapException()}contains(){const t=this.unwrapException();for(let e=0;e<arguments.length;e++)if(!t.includes(arguments[e]))return!1;return!0}}t.exports=o},function(t,e,r){(function(e){const n=r(9),o=r(10)(),s=r(11),i=r(12),a=r(1),l=r(13),u=r(3);t.exports.generateUuid=l;t.exports.DEFAULT_WEDID_SERVER_DOMAIN="https://NoSolidServer",t.exports.NO_APPLICATION_HINT="NO-APP";const c="https://w3id.org/lit/vocab/core#";t.exports.LIT_CORE_NAMESPACE=c,t.exports.prefixForHttpHeader=()=>`${c}prefixForHttpHeader_`,t.exports.createWebId=t=>{const r=e.env.DATA_SERVER_SOLID||"https://NoSolidServer";return a.namedNode(`https://${t}.${r.substring(8)}/profile/card#me`)},t.exports.generateWellKnownIri=t=>{const e=this.generateUuid();if(void 0===t)throw Error("Currently we require a code context when generating Well Known IRI's to always provide hints to where resources are created (may relax this if it proves a problem).");return"production".startsWith("dev")?a.namedNode(`https://DEV/${t}/${e}`):a.namedNode(`${c}.well-known/${t}/${e}`)};let p=0;t.exports.generateUuid=()=>"production".startsWith("dev")?p++:l(),t.exports.codeContext=(r,n)=>{let o=e.env.IRI_HINT_APPLICATION?`${e.env.IRI_HINT_APPLICATION}`:t.exports.NO_APPLICATION_HINT;return o+=r&&r.constructor?`/${r.constructor.name}`:"",o+=n?`/${n}`:""},t.exports.loadTurtleFile=(t,e,r)=>this.loadTurtleFileIntoDataset(t,void 0,e,r),t.exports.loadTurtleFilePromise=t=>this.loadTurtleFileIntoDatasetPromise(t,void 0),t.exports.loadTurtleFileIntoDatasetPromise=(t,e)=>{const r=n.readFileSync(t,"utf8"),i=o.parsers["text/turtle"].import(s(r));return(e||a.dataset()).import(i)},t.exports.loadTurtleFileIntoDataset=async(t,e,r,n)=>await this.loadTurtleFileIntoDatasetPromise(t,e).then(r).catch(n),t.exports.saveDatasetToFile=(t,e,r,s,i="text/turtle",a="utf-8")=>{const l=n.createWriteStream(e,{encoding:a});o.serializers[i].import(t.toStream()).pipe(l)},t.exports.datasetToString=(t,e="text/turtle",r="utf-8")=>{const n=o.serializers[e].import(t.toStream());return i(n,r)},t.exports.quadsToString=async(t,e="text/turtle",r="utf-8")=>await this.datasetToString(a.dataset().addAll(t)),t.exports.console=async(t,e="",r="text/turtle",n="utf-8")=>{const o=await this.datasetToString(Array.isArray(t)?a.dataset().addAll(t):a.dataset().add(t));return console.log(`================ ${e} START  ===================`),console.log(o),console.log(`================  ${e} END   ===================`),o},t.exports.isHttpOk=t=>{let e;switch(typeof t){case"string":if(e=Number(t),isNaN(e))throw Error(`Could not convert string status code [${String(t)}] to a valid number, so could not determine if it represents an OK status or not.`);break;case"number":e=t;break;case"object":if(!t.termType||"Literal"!==t.termType)throw Error(`Status code [${String(t)}] was of type Object, but we only support RDF Literals - could not check if it represents an OK status or not.`);e=t.valueOf();break;default:throw Error(`Could not determine datatype of specified status code [${String(t)}] to check if it represents an OK status or not.`)}return e>=200&&e<=299},t.exports.replaceIriLocalName=(t,e)=>{const r=t.value,n=Math.max(r.lastIndexOf("#"),r.lastIndexOf("/"));if(-1===n)throw Error(`Could not find an IRI separator (e.g. '#' or '/') when trying to replace local name of IRI [${t.valueOf()}] with [${e}].`);return a.namedNode(r.substring(0,n)+"/"+e)},t.exports.extractIriLocalName=e=>{const r=t.exports.isString(e)?e:e.value,n=r.lastIndexOf("#");if(-1===n){const t=r.lastIndexOf("/");if(-1===t||r.toLowerCase().startsWith("http")&&t<(r.toLowerCase().startsWith("https")?8:7))throw Error(`Expected hash fragment ('#') or slash ('/') (other than 'https://...') in IRI [${r}]`);return r.substring(t+1)}return r.substring(n+1)},t.exports.makeRelativeIri=(t,e,r)=>{if(void 0===e)return t;let n=this.stripTrailingPathSegment(t.value),o=e;for(;o.startsWith("../");){o=o.substring(3);try{n=this.stripTrailingPathSegment(n)}catch(t){throw Error(`Failed to create a relative IRI from original IRI of [$(iri.value}] replacing with relative part [${e}].`)}}return a.namedNode(`${n}/${o}${r?"/"+this.generateUuid():""}`)},t.exports.stripTrailingPathSegment=t=>{const e=Math.max(t.lastIndexOf("#"),t.lastIndexOf("/"));if(-1===e)throw Error(`Could not find an IRI separator (e.g. '#' or '/') when trying to replace local name of IRI [${t}].`);return t.substring(0,e)},t.exports.escapeRegExp=t=>t.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1"),t.exports.replaceAll=(t,e,r)=>t.replace(new RegExp(this.escapeRegExp(e),"g"),r),t.exports.isString=t=>"string"==typeof t||t instanceof String,t.exports.isStringIri=t=>{const e=t.toLowerCase();return e.startsWith("http://")||e.startsWith("https://")},t.exports.validateIri=(t,e,r)=>{if(!t)throw r.reset(),new u(r.context(),`${e} to match cannot be 'null' or 'undefined' (this may be a typo in the vocab term, or it may have moved to a different vocabulary - check the error stack to help pinpoint the problem) ${r.stateAsString()}.`);if(this.isString(t)&&!this.isStringIri(t))throw r.reset(),new u(r.context(),`${e} to match must be a valid HTTP IRI (i.e. must begin with 'http://' or 'https://'), but we got [${t}] ${r.stateAsString()}.`);return this.isString(t)?a.namedNode(t):t},t.exports.camelize=t=>{const e=t.toLowerCase().replace(/(?:(^.)|([-_\s]+.))/g,(function(t){return t.charAt(t.length-1).toUpperCase()}));return e.charAt(0).toLowerCase()+e.substring(1)},t.exports.mismatchingIris=(t,e,r)=>{const n=e.toString()===r.toString()?` (values as 'Strings' actually match, but first value is of type [${typeof e}] and second value is of type [${typeof r}]. We explicitly expected both to be IRI's (e.g. rdf.namedNode() instances))`:"";return`${t} - first IRI was [${e}], second was [${r}] - they *must* be the same${n}.`},t.exports.firstDatasetValue=(t,e)=>{const r=t.toArray().shift();return r?r.object.value:e}}).call(this,r(8))},function(t,e,r){"use strict";const n=r(1);t.exports=class{constructor(t,e,r){this._iri=t,this._values=e||new Map,this._contextMessage=r||"<None provided>",this._language="en",this._expandedMessage=void 0,this._valueAsRdfLiteral=!1,Object.defineProperty(this,"asRdfLiteral",{get(){return this._valueAsRdfLiteral=!0,this}}),Object.defineProperty(this,"setToEnglish",{get(){return this.setLanguage("en"),this}}),Object.defineProperty(this,"lookupEnglish",{get(){return this.returnAsStringOrRdfLiteral(this._values.get("en"))}}),Object.defineProperty(this,"lookup",{get(){return this.lookupButDefaultToEnglish(this._language)}})}getIri(){return this._iri}setLanguage(t){return this._language=t,this}addValue(t,e){return this._values.set(t,e),this}lookupLang(t){return this.returnAsStringOrRdfLiteral(this._values.get(t))}lookupButDefaultToEnglish(t){return this.returnAsStringOrRdfLiteral(this.lookupStringDefaultToEnglish(t))}lookupStringDefaultToEnglish(t){let e=this._values.get(t);if(!e){if(!(e=this._values.get("en")))throw new Error(`MultiLingualLiteral lookup on term [${this._iri}] for language [${t}], but no values at all (even English) (Context: [${this._contextMessage}]).`);this._language="en"}return e}params(...t){return this.paramsInLang(this._language,...t)}paramsInLang(t,...e){if(!t)throw new Error(`MultiLingualLiteral with IRI [${this._iri}] called expecting params but no language specified (Context: [${this._contextMessage}]).`);let r=this.lookupStringDefaultToEnglish(t);const n=r.split("{{").length-1;if(n!==e.length)throw new Error(`Setting parameters on LitMultiLingualLiteral with IRI [${this._iri}] and value [${r}] in language [${this._language}], but it requires [${n}] params and we received [${e.length}] (Context: [${this._contextMessage}]).`);for(let t=0;t<e.length;t++){const n=`{{${t}}}`;r=r.replace(n,e[t])}return this.returnAsStringOrRdfLiteral(r)}returnAsStringOrRdfLiteral(t){const e=this._valueAsRdfLiteral?n.literal(t,this._language):t;return this._expandedMessage=t,this._valueAsRdfLiteral=!1,e}}},function(t,e,r){"use strict";const n=r(0);class o{static addTerm(t,e){return localStorage.setItem(t,JSON.stringify(e)),this}static lookupLabel(t,e){return o.lookupFullTerm(`${t}-label-`,e)}static updateLabel(t,e,r){localStorage.setItem(`${t}-label-${e}`,r)}static lookupComment(t,e){return o.lookupFullTerm(`${t}-comment-`,e)}static updateComment(t,e,r){localStorage.setItem(`${t}-comment-${e}`,r)}static lookupMessage(t,e){return o.lookupFullTerm(`${t}-message-`,e)}static updateMessage(t,e,r){localStorage.setItem(`${t}-message-${e}`,r)}static lookupFullTerm(t,e){let r=localStorage.getItem(`${t}${e}`);if(!r){const o=localStorage.getItem(n.CONTEXT_KEY_PREFERRED_FALLBACK_LANGUAGE);o&&(r=localStorage.getItem(`${t}${o}`)),r?console.log(`Vocab term [${t}] found value [${r}] using preferred fallback language [${o}].`):(r=localStorage.getItem(`${t}en`))?console.log(`Vocab term [${t}] found value [${r}] using English instead of explicitly requested [${e}].`):(r=localStorage.getItem(`${t}`))||console.log(`Vocab term lookup not found: [${t}] for explicit language [${e}], nor fallback [${o}], English, or no specific language!.`)}return r}}t.exports=o},function(t,e,r){e.LitContext=r(0),e.LitContextError=r(3),e.LitUtils=r(4),e.LitMultiLingualLiteral=r(5),e.LitTermRegistry=r(6),e.LitVocabTerm=r(16)},function(t,e){var r,n,o=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function a(t){if(r===setTimeout)return setTimeout(t,0);if((r===s||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:s}catch(t){r=s}try{n="function"==typeof clearTimeout?clearTimeout:i}catch(t){n=i}}();var l,u=[],c=!1,p=-1;function d(){c&&l&&(c=!1,l.length?u=l.concat(u):p=-1,u.length&&h())}function h(){if(!c){var t=a(d);c=!0;for(var e=u.length;e;){for(l=u,u=[];++p<e;)l&&l[p].run();p=-1,e=u.length}l=null,c=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function g(t,e){this.fun=t,this.array=e}function f(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];u.push(new g(t,e)),1!==u.length||c||a(h)},g.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=f,o.addListener=f,o.once=f,o.off=f,o.removeListener=f,o.removeAllListeners=f,o.emit=f,o.prependListener=f,o.prependOnceListener=f,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e){},function(t,e){t.exports=r},function(t,e){t.exports=n},function(t,e){t.exports=o},function(t,e,r){var n,o,s=r(14),i=r(15),a=0,l=0;t.exports=function(t,e,r){var u=e&&r||0,c=e||[],p=(t=t||{}).node||n,d=void 0!==t.clockseq?t.clockseq:o;if(null==p||null==d){var h=s();null==p&&(p=n=[1|h[0],h[1],h[2],h[3],h[4],h[5]]),null==d&&(d=o=16383&(h[6]<<8|h[7]))}var g=void 0!==t.msecs?t.msecs:(new Date).getTime(),f=void 0!==t.nsecs?t.nsecs:l+1,m=g-a+(f-l)/1e4;if(m<0&&void 0===t.clockseq&&(d=d+1&16383),(m<0||g>a)&&void 0===t.nsecs&&(f=0),f>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=g,l=f,o=d;var x=(1e4*(268435455&(g+=122192928e5))+f)%4294967296;c[u++]=x>>>24&255,c[u++]=x>>>16&255,c[u++]=x>>>8&255,c[u++]=255&x;var _=g/4294967296*1e4&268435455;c[u++]=_>>>8&255,c[u++]=255&_,c[u++]=_>>>24&15|16,c[u++]=_>>>16&255,c[u++]=d>>>8|128,c[u++]=255&d;for(var v=0;v<6;++v)c[u+v]=p[v];return e||i(c)}},function(t,e){var r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(r){var n=new Uint8Array(16);t.exports=function(){return r(n),n}}else{var o=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),o[e]=t>>>((3&e)<<3)&255;return o}}},function(t,e){for(var r=[],n=0;n<256;++n)r[n]=(n+256).toString(16).substr(1);t.exports=function(t,e){var n=e||0,o=r;return[o[t[n++]],o[t[n++]],o[t[n++]],o[t[n++]],"-",o[t[n++]],o[t[n++]],"-",o[t[n++]],o[t[n++]],"-",o[t[n++]],o[t[n++]],"-",o[t[n++]],o[t[n++]],o[t[n++]],o[t[n++]],o[t[n++]],o[t[n++]]].join("")}},function(t,e,r){"use strict";r(1);const n=r(0),o=r(6),s=r(5),i=r(4);t.exports=class{constructor(t,e,r){this.value=t,this._litSessionContext=new n("en",e),this._label=new s(t,void 0,"rdfs:label"),this._comment=new s(t,void 0,"rdfs:comment"),this._message=new s(t,void 0,"message (should be defined in RDF vocab using: skos:definition)"),r&&this._label.addValue("en",i.extractIriLocalName(t)),Object.defineProperty(this,"label",{label:"Accessor for label that uses our LitSessionContext instance",get(){return this.labelInLang(this._litSessionContext.getLocale())}}),Object.defineProperty(this,"comment",{label:"Accessor for comment that uses our LitSessionContext instance",get(){return this.commentInLang(this._litSessionContext.getLocale())}}),Object.defineProperty(this,"message",{label:"Accessor that uses our LitSessionContext instance",get(){return this.messageInLang(this._litSessionContext.getLocale())}})}addLabel(t,e){return this._label.addValue(t,e),o.updateLabel(this.value,t,e),this}addComment(t,e){return this._comment.addValue(t,e),o.updateComment(this.value,t,e),this}addMessage(t,e){return this._message.addValue(t,e),o.updateMessage(this.value,t,e),this}labelInLang(t){return this._label.lookupButDefaultToEnglish(t)}commentInLang(t){return this._comment.lookupButDefaultToEnglish(t)}messageInLang(t){return this._message.lookupButDefaultToEnglish(t)}messageParams(...t){return this._message.paramsInLang(this._litSessionContext.getLocale(),...t)}messageParamsInLang(t,...e){return this._message.paramsInLang(t,...e)}}}])}));
